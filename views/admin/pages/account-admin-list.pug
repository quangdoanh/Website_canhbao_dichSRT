extends ../layouts/default.pug

block main
  h1.box-title Tài khoản người dùng

  //- Section 4: Bộ lọc
  .section-4
    .inner-wrap
      .inner-item.inner-label
        <i class="fa-solid fa-filter"></i> Bộ lọc
      .inner-item
        select(filter-status)
          option(value="") Trạng thái
          option(value="active") Hoạt động
          option(value="inactive") Tạm dừng
      .inner-item.inner-date
        input(type="date" filter-start-date)
        span - 
        input(type="date" filter-end-date)
      .inner-item
        select(filter-role)
          option(value="") Nhóm quyền
          each item in RoleList
            option(value=item.id) #{item.name}
      .inner-item.inner-reset(filter-reset)
        <i class="fa-solid fa-rotate-left"></i> Xóa bộ lọc

  //- Section 5: Hành động & tìm kiếm
  .section-5
    .inner-wrap
      .inner-change-status(
        change-multi 
        data-api =`/${pathAdmin}/account-admin/change-multi`
      )
        .inner-item
          select
            option(value="") -- Hành động --
            option(value="active") Hoạt động
            option(value="inactive") Dừng hoạt động
            option(value="delete") Xóa
        .inner-item
          button Áp dụng
      .inner-search
        i(class="fa-solid fa-magnifying-glass")
        input(type="text" placeholder="Tìm kiếm" search)
        .inner-button-create
          a(href=`/${pathAdmin}/account-admin/create`) + Tạo mới

  //- Section 6: Bảng danh sách
  .section-6
    .table-2
      table
        thead
          tr
            th.inner-center
              input(type="checkbox" class="inner-check" check-all)
            th.inner-center Họ tên
            th.inner-center Ảnh 
            th.inner-center Email
            th Số điện thoại
            th Nhóm quyền
            th Tạo bởi
            th Trạng thái
            th Tỉnh/TP
            th Hành động
        tbody
          each item in accountAdminList
            tr
              td.inner-center
                input(type="checkbox" class="inner-check" check-item = item.id)
              td.inner-center #{item.full_name}
              td.inner-center
                if item.avatar
                  img(src=item.avatar class="inner-avatar")
                else
                  img(src="/images/default-avatar.png" class="inner-avatar")
              td #{item.email}
              td #{item.phone}
              td #{item.roleName}
              td #{item.createdByName || "N/A"}
              td
                if item.status === "active"
                  .badge.badge-green Hoạt động
                else if item.status === "inactive"
                  .badge.badge-red Tạm dừng
                else if item.status === "initial"
                  .badge.badge-orange Khởi tạo
              td #{item.provinceName}
              td
                .inner-buttons
                  a.inner-edit(href=`/${pathAdmin}/account-admin/edit/${item.id}`)
                    i(class="fa-regular fa-pen-to-square")
                  button.inner-delete(button-delete data-api=`/${pathAdmin}/account-admin/delete/${item.id}`)
                    i(class="fa-regular fa-trash-can")
  //- Section 7: Pagination
  .section-7
    - const start = (pagination.page - 1) * limit + 1;
    - const end = Math.min(pagination.page * limit, pagination.totalRecords);
    span.inner-label Hiển thị #{start} - #{end} của #{pagination.totalRecords}

    select.inner-pagination(pagination name="page")
      each val in [...Array(pagination.totalPages).keys()]
        - const pageNum = val + 1;
        option(value=pageNum selected=(pageNum === pagination.page)) Trang #{pageNum}

