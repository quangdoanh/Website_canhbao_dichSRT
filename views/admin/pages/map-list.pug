extends ../layouts/default.pug
include ../mixins/optionTinh.pug


block main
  h1.box-title Danh sách bản đồ

  //- Section 4
  .section-4
    .inner-wrap
      .inner-item.inner-label
        <i class="fa-solid fa-filter"></i> Bộ lọc
      .inner-item
        select(filter-Ma_tinh)
          option(value="") Tỉnh
          +optionTinh(listTinh)
      .inner-item 
        select(filter-loaibando)
          option(value="") Loại bản đồ
          each item in loaiMap
            option(value=item.loaibando) #{item.loaibando}

        //-   .inner-item
        //-     select(filter-name)
        //-       option(value="") Người tạo
        //-       each item in accountAdmin
        //-         option(value=item.id) #{item.fullName || ""}
        //-   .inner-item.inner-date
        //-     input(type="date" filter-start-date)
        //-     span -
        //-     input(type="date" filter-end-date)
      .inner-item.inner-reset(filter-reset)
        <i class="fa-solid fa-rotate-left" ></i> Xóa bộ lọc
  //- End Section 4

  //- Section 5
  .section-5
    .inner-wrap
        //- .inner-search
        //-   i(class="fa-solid fa-magnifying-glass")
        //-   input(type="text" placeholder="Tìm kiếm" search)
        .inner-button-create
          a(href=`/${pathAdmin}/map/create`) + Tạo mới

  //- End Section 5

  //- Section 6
  .section-6
    .table-2
      table
        thead
          tr
            //- th(class="inner-center")
            //-   input(type="checkbox" class="inner-check" check-all)
            //- th Địa diểm điều tra
            th(class="inner-center") Tải file
            th(class="inner-center") Tỉnh
            th(class="inner-center") Loại bản đồ
            th(class="inner-center") Thông tin
            th Hành động
        tbody
        if mapList.length
          each item in mapList
            tr
              //- td(class="inner-center")
              //-   input(type="checkbox" class="inner-check" check-item=item.id)
              //- td #{item.diadiem_dieutra}
              td(class="inner-center") 
                a(href=item.file, download, style="text-decoration:none; color:black;" )
                  i(class="fa-solid fa-map-location-dot fa-2x ") 
              td(class="inner-center") #{item.ten_tinh}
              td(class="inner-center") #{item.loaibando}
              td(class="inner-center") #{item.thongtin}
              td
                .inner-buttons
                  a(href=`/${pathAdmin}/map/edit/${item.id}` class="inner-edit")
                    i.fa-regular.fa-pen-to-square
                  a(class="inner-delete" button-delete data-api=`/${pathAdmin}/map/delete/${item.id}`)
                    i.fa-regular.fa-trash-can
        else
          tr
            td(colspan="13" class="inner-center") Không có dữ liệu

            
  //- End Section 6

  //- Section 7
  .section-7
    - const start = (pagination.page - 1) * limit + 1;
    - const end = Math.min(pagination.page * limit, pagination.totalRecords);
    span.inner-label Hiển thị #{start} - #{end} của #{pagination.totalRecords}

    select.inner-pagination(pagination name="page")
      each val in [...Array(pagination.totalPages).keys()]
        - const pageNum = val + 1;
        option(value=pageNum selected=(pageNum === pagination.page)) Trang #{pageNum}